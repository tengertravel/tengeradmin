{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\admin\\\\Desktop\\\\tengeradmin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\Users\\\\admin\\\\Desktop\\\\tengeradmin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\admin\\\\Desktop\\\\tengeradmin\\\\src\\\\context\\\\UserContext.js\";\n\nimport React, { useState } from 'react';\nimport axios from '../components/Axios';\nvar UserContext = React.createContext();\nvar initialState = {\n  loading: false,\n  userId: null,\n  token: null,\n  errorCode: null,\n  error: null\n};\nexport var UserStore = function UserStore(props) {\n  var _useState = useState(initialState),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var loginUser = function loginUser(email, password) {\n    setState(_objectSpread({}, state, {\n      loading: true\n    })); //const data = {email,password,returnToken:true};\n\n    axios.post('users/login', {\n      email: email,\n      password: password\n    }).then(function (result) {\n      var resultData = result.data.data;\n      setState(_objectSpread({}, state, {\n        loading: false,\n        token: resultData.token,\n        userId: resultData._id,\n        error: null\n      }));\n      localStorage.setItem(\"token\", result.data.token);\n      localStorage.setItem(\"userId\", resultData._id);\n    }).catch(function (err) {\n      setState(_objectSpread({}, state, {\n        loading: false,\n        token: null,\n        userId: null,\n        error: err.response.data.error.MNMessage\n      }));\n    });\n  };\n\n  var loginErrorClear = function loginErrorClear() {\n    setState(_objectSpread({}, state, {\n      loading: false,\n      token: null,\n      userId: null,\n      error: null\n    }));\n  };\n\n  var logout = function logout() {\n    setState(_objectSpread({}, state, {\n      loading: false,\n      token: null,\n      userId: null,\n      error: null\n    }));\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"userId\");\n  };\n\n  var loginSucess = function loginSucess(uToken, uId) {};\n\n  return /*#__PURE__*/React.createElement(UserContext.Provider, {\n    value: {\n      state: state,\n      loginUser: loginUser,\n      loginErrorClear: loginErrorClear,\n      logout: logout\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, props.children);\n};\nexport default UserContext;","map":{"version":3,"names":["React","useState","axios","UserContext","createContext","initialState","loading","userId","token","errorCode","error","UserStore","props","state","setState","loginUser","email","password","post","then","result","resultData","data","_id","localStorage","setItem","catch","err","response","MNMessage","loginErrorClear","logout","removeItem","loginSucess","uToken","uId","children"],"sources":["C:/Users/admin/Desktop/tengeradmin/src/context/UserContext.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from '../components/Axios';\r\n\r\nconst UserContext = React.createContext();\r\nconst initialState = {\r\n    loading: false,\r\n    userId: null,\r\n    token: null,\r\n    errorCode:null,\r\n    error: null,\r\n}\r\n\r\nexport const UserStore = (props) =>{\r\n    const [state, setState] = useState(initialState);\r\n    const loginUser = (email, password) =>{\r\n        setState({...state, loading:true });\r\n        //const data = {email,password,returnToken:true};\r\n        axios.post('users/login',{\r\n        email: email,\r\n        password: password\r\n        }).then((result) => {\r\n            const resultData = result.data.data;\r\n            setState({...state, loading:false,token:resultData.token,userId:resultData._id,error:null});\r\n            localStorage.setItem(\"token\",result.data.token);\r\n            localStorage.setItem(\"userId\",resultData._id);\r\n        }).catch((err) => {\r\n            setState({...state, loading:false,token:null,userId:null, error:err.response.data.error.MNMessage});\r\n        });\r\n    }\r\n    const loginErrorClear = () =>{\r\n        setState({...state, loading:false,token:null,userId:null, error:null});\r\n    }\r\n    const logout = () =>{\r\n        setState({...state, loading:false,token:null,userId:null, error:null});\r\n        localStorage.removeItem(\"token\");\r\n        localStorage.removeItem(\"userId\");\r\n    }\r\n    const loginSucess = (uToken,uId)=>{\r\n\r\n    }\r\n\r\n    return(\r\n        <UserContext.Provider value={{ state, loginUser, loginErrorClear, logout }}>\r\n            {props.children}\r\n        </UserContext.Provider>\r\n    );\r\n}\r\n\r\nexport default UserContext;"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AAEA,IAAMC,WAAW,GAAGH,KAAK,CAACI,aAAN,EAApB;AACA,IAAMC,YAAY,GAAG;EACjBC,OAAO,EAAE,KADQ;EAEjBC,MAAM,EAAE,IAFS;EAGjBC,KAAK,EAAE,IAHU;EAIjBC,SAAS,EAAC,IAJO;EAKjBC,KAAK,EAAE;AALU,CAArB;AAQA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,KAAD,EAAU;EAAA,gBACLX,QAAQ,CAACI,YAAD,CADH;EAAA;EAAA,IACxBQ,KADwB;EAAA,IACjBC,QADiB;;EAE/B,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,KAAD,EAAQC,QAAR,EAAoB;IAClCH,QAAQ,mBAAKD,KAAL;MAAYP,OAAO,EAAC;IAApB,GAAR,CADkC,CAElC;;IACAJ,KAAK,CAACgB,IAAN,CAAW,aAAX,EAAyB;MACzBF,KAAK,EAAEA,KADkB;MAEzBC,QAAQ,EAAEA;IAFe,CAAzB,EAGGE,IAHH,CAGQ,UAACC,MAAD,EAAY;MAChB,IAAMC,UAAU,GAAGD,MAAM,CAACE,IAAP,CAAYA,IAA/B;MACAR,QAAQ,mBAAKD,KAAL;QAAYP,OAAO,EAAC,KAApB;QAA0BE,KAAK,EAACa,UAAU,CAACb,KAA3C;QAAiDD,MAAM,EAACc,UAAU,CAACE,GAAnE;QAAuEb,KAAK,EAAC;MAA7E,GAAR;MACAc,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BL,MAAM,CAACE,IAAP,CAAYd,KAAzC;MACAgB,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA8BJ,UAAU,CAACE,GAAzC;IACH,CARD,EAQGG,KARH,CAQS,UAACC,GAAD,EAAS;MACdb,QAAQ,mBAAKD,KAAL;QAAYP,OAAO,EAAC,KAApB;QAA0BE,KAAK,EAAC,IAAhC;QAAqCD,MAAM,EAAC,IAA5C;QAAkDG,KAAK,EAACiB,GAAG,CAACC,QAAJ,CAAaN,IAAb,CAAkBZ,KAAlB,CAAwBmB;MAAhF,GAAR;IACH,CAVD;EAWH,CAdD;;EAeA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAAK;IACzBhB,QAAQ,mBAAKD,KAAL;MAAYP,OAAO,EAAC,KAApB;MAA0BE,KAAK,EAAC,IAAhC;MAAqCD,MAAM,EAAC,IAA5C;MAAkDG,KAAK,EAAC;IAAxD,GAAR;EACH,CAFD;;EAGA,IAAMqB,MAAM,GAAG,SAATA,MAAS,GAAK;IAChBjB,QAAQ,mBAAKD,KAAL;MAAYP,OAAO,EAAC,KAApB;MAA0BE,KAAK,EAAC,IAAhC;MAAqCD,MAAM,EAAC,IAA5C;MAAkDG,KAAK,EAAC;IAAxD,GAAR;IACAc,YAAY,CAACQ,UAAb,CAAwB,OAAxB;IACAR,YAAY,CAACQ,UAAb,CAAwB,QAAxB;EACH,CAJD;;EAKA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,MAAD,EAAQC,GAAR,EAAc,CAEjC,CAFD;;EAIA,oBACI,oBAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAAEtB,KAAK,EAALA,KAAF;MAASE,SAAS,EAATA,SAAT;MAAoBe,eAAe,EAAfA,eAApB;MAAqCC,MAAM,EAANA;IAArC,CAA7B;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACKnB,KAAK,CAACwB,QADX,CADJ;AAKH,CAlCM;AAoCP,eAAejC,WAAf"},"metadata":{},"sourceType":"module"}